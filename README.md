# DA-URLAlertLogger
Простенькая CLI (Command Line Interface, или же не имеющая графического интерфейса) программа на PHP, которая сохраняет донаты, которые содержат ссылки, из DonationAlerts.
Использует [DonationAlerts API](https://www.donationalerts.com/apidoc), что вполне логично.
Для работы потребуется получить токен от своего DonationAlerts аккаунта.

# Функционал
Каждые 20 секунд происходит проверка на наличие новых донатов, а так же проверка на наличие ссылок в них.
Если замечается хоть одна ссылка, то донат будет выведен в саму командную строку, а так же сохранен в файлик `urlDons.log`, который появится автоматически в той папке, в которой была запущена программа, в формате: `год-месяц-день час:минута:секунда ник_донатера (сумма_доната валюта) - сообщение_со_ссылкой`

# Как запустить?
Всё довольно-таки просто. Вы можете либо скачать репозиторий и напрямую запустить Main.php, открыв командную строку в папке с этим файлом, используя команду `php Main.php` (если у вас установлен [PHP](https://www.php.net/) со включенной поддержкой CURL), либо же, вы можете загрузить архив с уже собранным приложением в [Releases](https://github.com/kotyaralih/DA-URLAlertLogger/releases).
Для запуска собранного приложения, понадобится установить [.NET 5.0 Runtime](https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-5.0.17-windows-x64-installer), т.к. для компиляции используется [Peachpie](https://peachpie.io/), который позволяет выполнять PHP код в рамках .NET

# Получаем токен от аккаунта DonationAlerts
1) Для начала, вам потребуется создать свое приложение внутри DA - https://www.donationalerts.com/application/clients
   Имя приложения вводим абсолютно любое, URL перенаправления тоже - можно даже несуществующую ссылку (обязательно с https:// в начале), но главное запомнить её, т.к. она нам позже пригодится.
2) После создания приложения, запоминаем его ID.
3) Теперь нужно скопировать данную ссылку: `https://www.donationalerts.com/oauth/authorize?client_id=АЙДИ_ПРИЛОЖЕНИЯ&redirect_uri=ССЫЛКА_ПЕРЕНАПРАВЛЕНИЯ&response_type=token&scope=oauth-user-show+oauth-donation-index`
   И в этой ссылке нужно заменить "АЙДИ_ПРИЛОЖЕНИЯ" на ID вашего приложения, и "ССЫЛКА_ПЕРЕНАПРАВЛЕНИЯ" на ссылку, которую вы указали при создании приложения.
   Разрешаем приложению доступ к списку донатов и к имени пользователя, после чего у вас в браузере откроется ссылка, которую вы вводили.
   Все, что будет указано в этой ссылке после access_token= и прямиком до &token_type и есть ваш токен.
   Срок годности токена - 1 год, если вы сами не захотите удалить приложение с DA.
